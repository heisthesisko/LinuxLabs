# Kickstart file automatically generated by anaconda.

#CentOS 7 EOL
install
cdrom
lang en_US.UTF-8
keyboard us
timezone America/New_York --isUtc
rootpw --plaintext your_root_password
authselect select minimal
authconfig --passalgo=sha512 --enableshadow
selinux --enforcing
firewall --enabled --service=ssh
network --bootproto=dhcp --device=eth0 --onboot=on --ipv6=auto
bootloader --location=mbr --timeout=5 --append=" crashkernel=auto"
clearpart --all --initlabel
autopart --type=lvm

%packages
@^minimal-environment
httpd
postgresql-server
%end

%addon com_redhat_kdump --disable

%pre
# Any pre-installation scripts can go here
%end

%post
# Enable and start httpd
systemctl enable httpd
systemctl start httpd

# Initialize PostgreSQL database and enable it
postgresql-setup --initdb
systemctl enable postgresql
systemctl start postgresql

# Create a PostgreSQL user and database for demonstration purposes
sudo -u postgres psql -c "CREATE USER demo WITH PASSWORD 'demo_password';"
sudo -u postgres psql -c "CREATE DATABASE demo_db OWNER demo;"

%end
